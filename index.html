<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>프로젝트 타임라인 스케줄러</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Roboto:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8fafc;
        }
        .task-checkbox:checked + .task-label {
            text-decoration: line-through;
            color: #9ca3af;
        }
        .phase-card {
            border-left: 4px solid;
            transition: all 0.3s ease-in-out;
        }
        .phase-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .phase-0 { border-color: #6366f1; }
        .phase-1 { border-color: #3b82f6; }
        .phase-2 { border-color: #f97316; }
        .phase-prep { border-color: #10b981; }
        .phase-3 { border-color: #ef4444; }
        .phase-4 { border-color: #6b7280; }
        .sticky-header {
            position: -webkit-sticky;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .countdown-dday {
            font-family: 'Roboto', sans-serif;
        }
        .command-arrow {
            font-size: 2rem;
            color: #9ca3af;
            line-height: 1;
        }
        .team-module {
            transition: all 0.3s ease-in-out;
        }
        .team-module.highlight {
            transform: scale(1.05);
            box-shadow: 0 0 0 3px #fbbf24, 0 10px 15px -3px rgb(0 0 0 / 0.2);
            z-index: 5;
        }
        .team-module.dimmed {
            opacity: 0.5;
            transform: scale(0.98);
        }
        .collab-tag {
            display: inline-block;
            background-color: #e5e7eb;
            color: #4b5563;
            padding: 2px 8px;
            border-radius: 9999px;
            font-size: 0.75rem;
            margin-right: 4px;
            margin-top: 4px;
        }
    </style>
</head>
<body class="text-gray-800">
<div class="max-w-[1920px] mx-auto">
    <header class="bg-white/80 backdrop-blur-md shadow-md sticky-header p-4">
        <div class="container mx-auto text-center px-4">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-900">현장 총괄 프로듀서 프로젝트 스케줄러</h1>
            <p class="text-lg text-gray-600 mt-1">25 Oct. WSOP SC CYPRUS</p>
            <div id="countdown" class="mt-4 text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-indigo-600">
                <!-- Countdown will be inserted here -->
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        <div id="management-structure-container" class="mb-12">
            <!-- Management Structure will be generated here -->
        </div>
        <div id="timeline-container" class="space-y-8">
            <!-- Timeline will be generated here -->
        </div>
    </main>
</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Countdown Logic ---
            const projectStartDate = new Date('2025-10-09T00:00:00');
            const now = new Date();
            const diffTime = projectStartDate - now;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            const countdownEl = document.getElementById('countdown');
            if (diffDays > 0) {
                countdownEl.innerHTML = `프로젝트 시작까지 <span class="text-5xl countdown-dday">D-${diffDays}</span>`;
            } else if (diffDays === 0) {
                countdownEl.innerHTML = `<span class="text-5xl countdown-dday">D-DAY</span>`;
            } else {
                 countdownEl.innerHTML = `프로젝트 <span class="text-5xl countdown-dday">D+${Math.abs(diffDays)}</span>`;
            }

            // --- Task Data (Weekends Excluded for Pre-production) ---
            const preProductionTasks = {
                phase0: {
                    title: "Phase 0: 초기 기획",
                    range: "~ 8월 22일 (주중 근무)",
                    color: "phase-0",
                    items: [
                        { day: "D-63 ~ D-57 (8/7~15)", task: "프로젝트 킥오프 미팅 참여 (본사/주최사)" },
                        { day: "D-63 ~ D-57 (8/7~15)", task: "모든 이해관계자 목록 작성 및 매핑" },
                        { day: "D-56 ~ D-52 (8/18~22)", task: "현장 실사 진행 및 베뉴 기술 요건 확정" },
                        { day: "D-52 (8/22)", task: "커뮤니케이션 채널 확정 및 비상 연락망 구축" },
                    ]
                },
                phase1: {
                    title: "Phase 1: 사전 제작",
                    range: "8월 25일 ~ 8월 29일 (주중 근무)",
                    color: "phase-1",
                    items: [
                        { day: "D-51 (8/25)", task: "RACI 차트 초안 작성 및 공유" },
                        { day: "D-50 (8/26)", task: "현지 외주 업체 리서치 및 후보 선정" },
                        { day: "D-46 (8/29)", task: "기술 장비 리스트 최종 확정 및 백업 계획 수립" },
                        { day: "D-46 (8/29)", task: "통합 ROS(Run-of-Show) 초안 작성" },
                    ]
                },
                phase2: {
                    title: "Phase 2: 현장 설치 및 리허설 (9월)",
                    range: "9월 1일 ~ 9월 30일 (주중 근무)",
                    color: "phase-2",
                    items: [
                        { day: "D-38 (9/1)", task: "현장 도착 및 현지 팀 미팅" },
                        { day: "D-37 ~ D-30 (9/2~9)", task: "장비 반입 및 리스트 대조, 지휘소(컨트롤 타워) 구축" },
                        { day: "D-29 ~ D-20 (9/10~19)", task: "카메라, 조명, 오디오 시스템 설치 및 기본 테스트" },
                        { day: "D-19 ~ D-13 (9/20~26)", task: "기술 리허설 (현장-본사 전체 신호 흐름 테스트), 동기화(Sync) 최종 확인" },
                        { day: "D-12 ~ D-10 (9/27~29)", task: "압박 테스트(Pressure Test) 수행 (전원, 네트워크, 장비 장애 시뮬레이션)" },
                        { day: "D-9 (9/30)", task: "ROS 기반 전체 리허설 및 모든 팀원 대상 최종 브리핑" },
                    ]
                }
            };
            
            const octoberPrepTasks = {
                phase_prep: {
                    title: "최종 국내 정비 (10월)",
                    range: "10월 1일 ~ 10월 8일 (주중 근무)",
                    color: "phase-prep",
                    items: [
                        { day: "D-8 (10/1)", task: "최종 패킹 리스트 확인 및 누락분 점검" },
                        { day: "D-7 (10/2)", task: "개인 장비 점검 및 출장 준비" },
                        { day: "D-6 (10/3)", task: "본사 총괄 디렉터와 최종 보고 및 점검 회의" },
                        { day: "D-2 (10/7)", task: "프로덕션 바이블 최종 버전 프린트 및 배포" },
                        { day: "D-1 (10/8)", task: "출장 전 휴식 및 컨디션 조절" }
                    ]
                }
            };

            const productionSchedule = [
                { date: '2025-10-09', event: 'Opener Event Day 1-A' },
                { date: '2025-10-10', event: '휴식 및 장비 점검' },
                { date: '2025-10-11', event: 'Mini Main Event Day 1-A' },
                { date: '2025-10-12', event: 'Mini Main Event Day 1-C' },
                { date: '2025-10-13', event: 'Mystery Bounty Day 1-A' },
                { date: '2025-10-14', event: 'Mystery Bounty Day 1-D' },
                { date: '2025-10-15', event: 'Mystery Bounty Day 2' },
                { date: '2025-10-16', event: 'Main Event Day 1-A / Super High Roller Day 1' },
                { date: '2025-10-17', event: 'Main Event Day 1-C / Super High Roller Final Day' },
                { date: '2025-10-18', event: 'Main Event Day 2' },
                { date: '2025-10-19', event: 'Main Event Day 3' },
                { date: '2025-10-20', event: 'Main Event Day 4' },
                { date: '2025-10-21', event: 'Main Event Final Day' }
            ];

            const hourlyTemplate = [
                { time: "09:00", task: "현장 도착 및 일일 브리핑 (Call Sheet Briefing)" },
                { time: "10:00", task: "모든 시스템 최종 점검 (Power-on Check)" },
                { time: "11:30", task: "선수 브리핑 및 방송 대기" },
                { time: "12:00", task: "대회 시작 및 라이브 프로덕션 개시" },
                { time: "16:00", task: "중간 장비 점검 및 데이터 백업" },
                { time: "22:00", task: "경기 종료 예상 및 후반부 집중 운영" },
                { time: "24:00", task: "최종 데이터 전송 확인 및 일일 디브리핑 (Hotwash)" }
            ];
            
            const postProductionTasks = {
                 phase4: {
                    title: "Phase 4: 철수 및 사후 분석",
                    range: "10월 22일 ~ (주말 포함)",
                    color: "phase-4",
                    items: [
                        { day: "D+13 (10/22)", task: "장비 철수 및 리스트 대조 확인" },
                        { day: "D+13 (10/22)", task: "베뉴 원상 복구 및 관리자 확인" },
                        { day: "D+14 (10/23)", task: "현지 업체 및 프리랜서 비용 정산" },
                        { day: "D+20 (10/29)", task: "공식 사후 검토 회의 소집 및 진행" },
                        { day: "D+23 (11/3)", task: "프로젝트 결과 보고서 작성 (KPI, 개선점 등)" },
                        { day: "D+27 (11/7)", task: "프로덕션 바이블 최종 업데이트 (학습 내용 반영)" },
                    ]
                }
            }

            // --- Management Structure Generation ---
            function createManagementStructure() {
                const container = document.getElementById('management-structure-container');
                container.innerHTML = `
                    <div class="bg-white rounded-lg shadow-lg p-4 md:p-6">
                        <h2 class="text-xl md:text-2xl font-bold text-center mb-2">인터랙티브 협업 네트워크</h2>
                        <p class="text-center text-gray-500 text-sm mb-8">각 팀 카드에 마우스를 올리면 협업 라인이 하이라이트됩니다.</p>
                        
                        <!-- Command Chain -->
                        <div class="text-center mb-8">
                            <div class="inline-block bg-indigo-100 text-indigo-800 font-bold p-3 rounded-lg shadow">원격 본사 총괄 디렉터</div>
                            <div class="command-arrow">↓</div>
                            <div class="inline-block bg-indigo-100 text-indigo-800 font-bold p-3 rounded-lg shadow">조감독</div>
                            <div class="command-arrow">↓</div>
                            <div class="relative inline-block">
                                <div class="bg-green-100 text-green-800 font-extrabold text-lg p-4 rounded-lg shadow-lg border-2 border-green-300">현장 총괄 프로듀서 (나)</div>
                                <div class="absolute -top-4 -right-4 bg-yellow-200 text-yellow-800 text-xs font-bold px-2 py-1 rounded-full shadow-md">PA (직속 보조)</div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2 max-w-2xl mx-auto">현장 프로덕션의 모든 측면을 총괄. 예산, 일정, 인력, 품질 관리 및 본사 조감독과의 최종 소통 책임.</p>
                        </div>

                        <!-- Team Modules -->
                        <div id="team-dashboard" class="border-t-2 border-gray-200 pt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                            
                            <div class="team-module bg-blue-50 p-4 rounded-lg shadow-md border-l-4 border-blue-400" data-team="feature-table">
                                <h3 class="font-bold text-blue-800">피처 테이블 리더</h3>
                                <p class="text-xs text-blue-600 italic mt-1 mb-3">방송 연출 및 기술 운영 총괄</p>
                                <ul class="text-sm space-y-2 mb-3">
                                    <li>- 카메라 감독, 스위처, FR7, GFX, 조명 등</li>
                                </ul>
                                <div class="border-t pt-2 mt-2">
                                    <span class="collab-tag">기술팀</span>
                                </div>
                            </div>

                            <div class="team-module bg-purple-50 p-4 rounded-lg shadow-md border-l-4 border-purple-400" data-team="tech">
                                <h3 class="font-bold text-purple-800">기술팀 리더</h3>
                                <p class="text-xs text-purple-600 italic mt-1 mb-3">방송 기술 인프라 총괄</p>
                                <ul class="text-sm space-y-2 mb-3">
                                    <li>- 오디오/네트워크 담당 & 보조</li>
                                </ul>
                                <div class="border-t pt-2 mt-2">
                                    <span class="collab-tag">피처 테이블</span>
                                    <span class="collab-tag">외주 PM</span>
                                    <span class="collab-tag">소프트 콘텐츠</span>
                                </div>
                            </div>

                            <div class="team-module bg-pink-50 p-4 rounded-lg shadow-md border-l-4 border-pink-400" data-team="vendor">
                                <h3 class="font-bold text-pink-800">외주 PM</h3>
                                <p class="text-xs text-pink-600 italic mt-1 mb-3">모든 외부 업체 관리 및 소통</p>
                                <ul class="text-sm space-y-2 mb-3">
                                    <li>- 호텔, 운영사, 대행사, 외주 프로덕션</li>
                                </ul>
                                <div class="border-t pt-2 mt-2">
                                    <span class="collab-tag">기술팀</span>
                                </div>
                            </div>

                            <div class="team-module bg-teal-50 p-4 rounded-lg shadow-md border-l-4 border-teal-400" data-team="soft-content">
                                <h3 class="font-bold text-teal-800">소프트 콘텐츠 리더</h3>
                                <p class="text-xs text-teal-600 italic mt-1 mb-3">부가 콘텐츠 기획 및 제작</p>
                                <ul class="text-sm space-y-2 mb-3">
                                    <li>- 소프트 팀</li>
                                </ul>
                                <div class="border-t pt-2 mt-2">
                                    <span class="collab-tag">기술팀</span>
                                </div>
                            </div>

                        </div>
                    </div>
                `;
            }
            
            // --- Interactive Dashboard Logic ---
            function initializeDashboardInteraction() {
                const collaborationMap = {
                    'feature-table': ['tech'],
                    'tech': ['feature-table', 'vendor', 'soft-content'],
                    'vendor': ['tech'],
                    'soft-content': ['tech']
                };

                const teamModules = document.querySelectorAll('.team-module');

                teamModules.forEach(module => {
                    module.addEventListener('mouseenter', () => {
                        const currentTeam = module.dataset.team;
                        const collaborators = collaborationMap[currentTeam] || [];
                        
                        teamModules.forEach(m => {
                            const teamName = m.dataset.team;
                            if (teamName === currentTeam || collaborators.includes(teamName)) {
                                m.classList.add('highlight');
                                m.classList.remove('dimmed');
                            } else {
                                m.classList.add('dimmed');
                                m.classList.remove('highlight');
                            }
                        });
                    });

                    module.addEventListener('mouseleave', () => {
                        teamModules.forEach(m => {
                            m.classList.remove('highlight', 'dimmed');
                        });
                    });
                });
            }

            // --- Timeline Generation ---
            const timelineContainer = document.getElementById('timeline-container');
            
            function createTaskCards(phaseData) {
                Object.values(phaseData).forEach(phase => {
                    const phaseCard = document.createElement('div');
                    phaseCard.className = `phase-card ${phase.color} bg-white rounded-lg shadow-lg p-4 md:p-6`;

                    let tasksHtml = phase.items.map((item, index) => `
                        <div class="flex items-center py-2 border-b border-gray-200 last:border-b-0">
                            <span class="font-semibold text-gray-600 w-28 md:w-36 text-sm flex-shrink-0">${item.day}</span>
                            <div class="flex-grow ml-4">
                                <input type="checkbox" id="task-${phase.title.replace(/\s/g, '')}-${index}" class="task-checkbox hidden">
                                <label for="task-${phase.title.replace(/\s/g, '')}-${index}" class="task-label cursor-pointer flex items-center">
                                    <span class="w-5 h-5 mr-3 border-2 border-gray-300 rounded-sm flex-shrink-0 flex items-center justify-center">
                                        <svg class="w-4 h-4 text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                                    </span>
                                    ${item.task}
                                </label>
                            </div>
                        </div>
                    `).join('');

                    phaseCard.innerHTML = `
                        <div class="flex flex-col sm:flex-row justify-between sm:items-center">
                            <h2 class="text-xl md:text-2xl font-bold mb-2 sm:mb-0">${phase.title}</h2>
                            <span class="text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full self-start sm:self-center">${phase.range}</span>
                        </div>
                        <div class="mt-4">
                            ${tasksHtml}
                        </div>
                    `;
                    timelineContainer.appendChild(phaseCard);
                });
            }

            function createProductionSchedule() {
                const phaseCard = document.createElement('div');
                phaseCard.className = `phase-card phase-3 bg-white rounded-lg shadow-lg p-4 md:p-6`;
                
                let productionDaysHtml = productionSchedule.map((day, dayIndex) => {
                    const dayDate = new Date(day.date + 'T00:00:00');
                    const isToday = now.toDateString() === dayDate.toDateString();
                    const dayOfWeek = ['일', '월', '화', '수', '목', '금', '토'][dayDate.getDay()];

                    let hourlyTasksHtml = hourlyTemplate.map((item, taskIndex) => `
                        <div class="flex items-center py-2 border-b border-gray-200 last:border-b-0">
                            <span class="font-semibold text-gray-600 w-16 text-sm">${item.time}</span>
                            <div class="flex-grow ml-4">
                                <input type="checkbox" id="task-prod-${dayIndex}-${taskIndex}" class="task-checkbox hidden">
                                <label for="task-prod-${dayIndex}-${taskIndex}" class="task-label cursor-pointer flex items-center">
                                    <span class="w-5 h-5 mr-3 border-2 border-gray-300 rounded-sm flex-shrink-0 flex items-center justify-center">
                                        <svg class="w-4 h-4 text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                                    </span>
                                    ${item.task}
                                </label>
                            </div>
                        </div>
                    `).join('');

                    return `
                        <div class="mt-6 p-4 rounded-md ${isToday ? 'bg-indigo-50 border-2 border-indigo-400' : 'bg-gray-50'}">
                            <div class="flex flex-col sm:flex-row justify-between sm:items-center">
                                <h3 class="text-lg font-bold flex items-center mb-2 sm:mb-0">
                                    ${day.date} (${dayOfWeek}) <span class="ml-3 text-base font-medium text-red-600">${day.event}</span>
                                </h3>
                                ${isToday ? '<span class="text-sm font-bold text-white bg-indigo-500 px-3 py-1 rounded-full self-start sm:self-center">TODAY</span>' : ''}
                            </div>
                            <div class="mt-2">
                                ${day.event.includes('휴식') ? '<p class="text-gray-600">휴식일입니다. 장비 점검 및 재정비 시간을 갖습니다.</p>' : hourlyTasksHtml}
                            </div>
                        </div>
                    `;
                }).join('');

                phaseCard.innerHTML = `
                    <div class="flex flex-col sm:flex-row justify-between sm:items-center">
                        <h2 class="text-xl md:text-2xl font-bold mb-2 sm:mb-0">Phase 3: 프로덕션 실행</h2>
                        <span class="text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full self-start sm:self-center">10월 9일 ~ 10월 21일</span>
                    </div>
                    ${productionDaysHtml}
                `;
                timelineContainer.appendChild(phaseCard);
            }
            
            createManagementStructure();
            initializeDashboardInteraction();
            createTaskCards(preProductionTasks);
            createTaskCards(octoberPrepTasks);
            createProductionSchedule();
            createTaskCards(postProductionTasks);

            // Add interactivity to checkboxes
            document.querySelectorAll('.task-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    const label = e.target.nextElementSibling;
                    const checkmark = label.querySelector('svg');
                    const box = label.querySelector('span');
                    if (e.target.checked) {
                        checkmark.classList.remove('hidden');
                        box.classList.add('bg-blue-500', 'border-blue-500');
                    } else {
                        checkmark.classList.add('hidden');
                        box.classList.remove('bg-blue-500', 'border-blue-500');
                    }
                });
            });
        });
    </script>
</body>
</html>
